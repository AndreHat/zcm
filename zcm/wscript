#! /usr/bin/env python
# encoding: utf-8

def build(ctx):
    ctx.shlib(target = 'zcm',
              includes = '.',
              export_includes = '.',
              use = ['default', 'zmq'],
              source = ctx.path.ant_glob(['*.cpp', '*.c',
                                          'util/*.c', 'util/*.cpp',
                                          'transport/*.c', 'transport/*.cpp',
                                          'cpp/*.c', 'cpp/*.cpp']))

    install_headers = ['zcm.h', 'zcm_coretypes.h', 'transport.h']
    ctx.install_files('${PREFIX}/include/zcm', install_headers)

    ctx.recurse('util');
    ctx.recurse('transport');
    ctx.recurse('cpp');
